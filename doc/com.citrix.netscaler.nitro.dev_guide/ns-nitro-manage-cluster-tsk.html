<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<!--(c) Copyright 2009-2012 Citrix Systems, Inc. All rights reserved.-->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Cluster Management"/>
<meta name="DC.Relation" scheme="URI" content="ns-nitro-category-new-tsk.html"/>
<meta name="DC.Date.Created" content=""/>
<meta name="DC.Date.Modified" content="2012-03-14"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="ns-nitro-manage-cluster-tsk.dita"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<link rel="stylesheet" type="text/css" href="citrix-help.css"/>
<title>Cluster Management</title>
</head>
<body id="ns-nitro-manage-cluster-tsk.dita"><a name="ns-nitro-manage-cluster-tsk.dita"><!-- --></a>

<h1 class="topictitle1">Cluster Management</h1>
<p style="margin-top: 12px !important">Updated: 2012-03-14</p><div><div class="section"><p>For managing clusters, you can add or remove a cluster instance or an individual node and perform a few other instance or node operations such as viewing instance or node properties. You can also configure the cluster IP address. Other cluster-management tasks include joining a NetScaler appliance to the cluster and configuring a linkset.</p>
<div class="p"><ul><li><a href="ns-nitro-manage-cluster-tsk.html#ns-nitro-manage-cluster-tsk.dita__clusterinstance">Cluster Instance Operations</a></li>
<li><a href="ns-nitro-manage-cluster-tsk.html#ns-nitro-manage-cluster-tsk.dita__clusternode">Cluster Node Operations</a></li>
<li><a href="ns-nitro-manage-cluster-tsk.html#ns-nitro-manage-cluster-tsk.dita__clip">Cluster IP Address</a></li>
<li><a href="ns-nitro-manage-cluster-tsk.html#ns-nitro-manage-cluster-tsk.dita__spotted">Spotted IP Address</a></li>
<li><a href="ns-nitro-manage-cluster-tsk.html#ns-nitro-manage-cluster-tsk.dita__join">Join NetScaler Appliance to Cluster</a></li>
<li><a href="ns-nitro-manage-cluster-tsk.html#ns-nitro-manage-cluster-tsk.dita__linkset">Linkset Operations</a></li>
</ul>
</div>
<p>The following tables describes the operations that can be performed to configure the cluster. For a more detailed description of the operations, see the API reference available in the <span class="filepath">&lt;NITRO_SDK_HOME&gt;/doc</span> folder.</p>
<p id="ns-nitro-manage-cluster-tsk.dita__clusterinstance"><a name="ns-nitro-manage-cluster-tsk.dita__clusterinstance"><!-- --></a><strong>Cluster Instance Operations</strong></p>
<p>You can create, remove, view, enable, and disable a cluster instance.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><strong>Description</strong></td>
<td class="cellrowborder" valign="top"><strong>Sample</strong></td>
</tr>
</tbody>
<tbody><tr><td class="cellrowborder" valign="top"><p>The <samp class="codeph">com.citrix.netscaler.nitro.resource.config.cluster.clusterinstance</samp> class provides the APIs to manage a cluster instance. </p>
</td>
<td class="cellrowborder" valign="top"><p>To create a cluster instance with ID 1:</p>
<pre class="codeblock">clusterinstance new_cl_inst_obj = new clusterinstance();
//Set the properties of the cluster instance locally
new_cl_inst_obj.set_clid(1);
new_cl_inst_obj.set_preemption("ENABLED");

//Upload the cluster instance
clusterinstance.add(ns_session,new_cl_inst_obj);</pre>
</td>
</tr>
</tbody>
</table>
</div>
<p/>
<p id="ns-nitro-manage-cluster-tsk.dita__clusternode"><a name="ns-nitro-manage-cluster-tsk.dita__clusternode"><!-- --></a><strong>Cluster Node Operations</strong></p>
<p>You can add, remove, and veiw the cluster nodes.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><strong>Description</strong></td>
<td class="cellrowborder" valign="top"><strong>Sample</strong></td>
</tr>
</tbody>
<tbody><tr><td class="cellrowborder" valign="top"><p>The <samp class="codeph">com.citrix.netscaler.nitro.resource.config.cluster.clusternode</samp> class provides the APIs to manage the cluster nodes. </p>
</td>
<td class="cellrowborder" valign="top"><p>To add a cluster node with NSIP address 10.102.29.60:</p>
<pre class="codeblock">clusternode new_cl_node_obj = new clusternode();
//Set the properties of the cluster node locally
new_cl_node_obj.set_nodeid(0);
new_cl_node_obj.set_ipaddress("10.102.29.60");
new_cl_node_obj.set_state("ACTIVE");
new_cl_node_obj.set_backplane("0/1/1");

//Upload the cluster node
clusternode.add(ns_session,new_cl_node_obj);</pre>
</td>
</tr>
</tbody>
</table>
</div>
 <p/>
<p id="ns-nitro-manage-cluster-tsk.dita__clip"><a name="ns-nitro-manage-cluster-tsk.dita__clip"><!-- --></a><strong>Cluster IP address</strong></p>
<p>When you create an IP address you can define it as a cluster IP address.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><strong>Description</strong></td>
<td class="cellrowborder" valign="top"><strong>Sample</strong></td>
</tr>
</tbody>
<tbody><tr><td class="cellrowborder" valign="top"><p>The <samp class="codeph">com.citrix.netscaler.nitro.resource.config.ns.nsip</samp> class provides the <samp class="codeph">add()</samp> API to configure an IP address. To configure the IP address as a cluster IP address, you must specify the type as CLIP.</p>
</td>
<td class="cellrowborder" valign="top"><p>To configure a cluster IP address on NetScaler appliance with IP address 10.102.29.60:</p>
<pre class="codeblock">nsip new_nsip_obj = new nsip();
//Set the properties locally
new_nsip_obj.set_ipaddress("10.102.29.61");
new_nsip_obj.set_netmask("255.255.255.255");
new_nsip_obj.set_type("CLIP");

//Upload the cluster node
nsip.add(ns_session,new_nsip_obj);</pre>
</td>
</tr>
</tbody>
</table>
</div>
<p/>
<p id="ns-nitro-manage-cluster-tsk.dita__spotted"><a name="ns-nitro-manage-cluster-tsk.dita__spotted"><!-- --></a><strong> Spotted IP Address</strong></p>
<p>To configure a spotted IP address you must specify the node that must own the IP address. This configuration must be done while adding the IP address on the cluster IP address.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><strong>Description</strong></td>
<td class="cellrowborder" valign="top"><strong>Sample</strong></td>
</tr>
</tbody>
<tbody><tr><td class="cellrowborder" valign="top"><p>The <samp class="codeph">com.citrix.netscaler.nitro.resource.config.ns.nsip</samp> class provides the <samp class="codeph">add()</samp> API to configure an IP address. To configure the IP address as spotted, you must specify the ID of the node that must own the IP address.</p>
</td>
<td class="cellrowborder" valign="top"><p>To configure a spotted SNIP address on a node with ID 1:</p>
<pre class="codeblock">nsip new_nsip_obj = new nsip();
//Set the properties locally
new_nsip_obj.set_ipaddress("10.102.29.77");
new_nsip_obj.set_netmask("255.255.255.0");
new_nsip_obj.set_type("SNIP");
new_nsip_obj.set_ownernode(1);

//Upload the cluster node
nsip.add(ns_session,new_nsip_obj);</pre>
</td>
</tr>
</tbody>
</table>
</div>
<p/>
<p id="ns-nitro-manage-cluster-tsk.dita__join"><a name="ns-nitro-manage-cluster-tsk.dita__join"><!-- --></a><strong>Join  NetScaler Appliance to Cluster</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><strong>Description</strong></td>
<td class="cellrowborder" valign="top"><strong>Sample</strong></td>
</tr>
</tbody>
<tbody><tr><td class="cellrowborder" valign="top"><p>The <samp class="codeph">com.citrix.netscaler.nitro.resource.config.cluster.cluster</samp> class provides the <samp class="codeph">join()</samp> API to join a  NetScaler appliance to the cluster. You must specify the cluster IP address and the nsroot password of the CCO.</p>
</td>
<td class="cellrowborder" valign="top"><p>To join a NetScaler appliance to a cluster:</p>
<pre class="codeblock">cluster new_cl_obj = new cluster();
//Set the properties of the cluster  locally
new_cl_obj.set_clip("10.102.29.61");
new_cl_obj.set_password("verysecret");

//Upload the cluster
cluster.add(ns_session,new_cl_obj);</pre>
</td>
</tr>
</tbody>
</table>
</div>
<p/>
<p id="ns-nitro-manage-cluster-tsk.dita__linkset"><a name="ns-nitro-manage-cluster-tsk.dita__linkset"><!-- --></a><strong>Linkset Operations</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><strong>Description</strong></td>
<td class="cellrowborder" valign="top"><strong>Sample</strong></td>
</tr>
</tbody>
<tbody><tr><td class="cellrowborder" valign="top"><p>The <samp class="codeph">com.citrix.netscaler.nitro.resource.config.network.linkset</samp> class provides the APIs to manage linksets.</p>
<p>To configure a linkset, do the following:</p>
<ol><li>Add a linkset by invoking the <samp class="codeph">add()</samp> method of the <samp class="codeph">linkset</samp> class.</li>
<li>Bind the interfaces to the linkset using the <samp class="codeph">add()</samp> method of the  <samp class="codeph">linkset_interface_binding</samp> class.</li>
</ol>
</td>
<td class="cellrowborder" valign="top"><p>To create a linkset LS/1 and bind interfaces 1/1/2 and 2/1/2 to it:</p>
<pre class="codeblock">//Create the linkset
linkset new_linkset_obj = new linkset();
new_linkset_obj.set_id("LS/1");
linkset.add(ns_session,new_linkset_obj);

//Bind the interfaces to the linkset
linkset_interface_binding new_linkif_obj = new linkset_interface_binding();
new_linkif_obj.set_id("LS/1");
new_linkif_obj.set_ifnum("1/1/2 2/1/2");
linkset_interface_binding.add(ns_session,new_linkif_obj); </pre>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<p style="font-size: 8pt !important"/>
</body>
</html>